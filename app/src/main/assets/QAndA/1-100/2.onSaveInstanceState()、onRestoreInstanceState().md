### onSaveInstanceState

- 两个方法

  ```java
  @Override
  	protected void onSaveInstanceState(Bundle outState) {
  		super.onSaveInstanceState(outState);
  	}
  ```

  ```java
  @Override
  	public void onSaveInstanceState(Bundle outState, PersistableBundle outPersistentState) {
  		super.onSaveInstanceState(outState, outPersistentState);
  	}
  ```

- 区别

  ××××××××××××××××××××××××××××××××××××××××××××××××××××××××××××××××××××××××

- onSaveInstanceState不是生命周期方法，不保证一定会调用，它用来在Activity被意外销毁时保存UI状态的，只能用来保存临时性数据，比如UI控件的属性等，不能跟数据的持久化存储混为一谈，持久化存储应该在Activity#onPause/onStop中执行。

- onSaveInstanceState和onRestoreInstanceState不一定成对调用。
- onSaveInstanceState中保存的数据可以在onCreate()中恢复也可以在onRestoreInstanceState()中恢复
- Activity和Fragment中都有这两个方法可以保存和恢复数据。
- 在onPause()中做数据持久化操作

- 调用时机：　

  |                  调用时机                  |                           生命周期                           |      |
  | :----------------------------------------: | :----------------------------------------------------------: | ---- |
  |             当用户按下HOME键时             |           onPause -> onSaveInstanceState -> onStop           |      |
  | 用户按下显示正在运行的程序列表的按键的时候 |           onPause -> onSaveInstanceState -> onStop           |      |
  |       按下电源按键（关闭屏幕显示）时       |           onPause -> onSaveInstanceState -> onStop           |      |
  |    从当前activity启动一个新的activity时    |           onPause -> onSaveInstanceState -> onStop           |      |
  |           电话打入等情况发生时。           |           onPause -> onSaveInstanceState -> onStop           |      |
  |               屏幕方向切换时               | onPause -> onSaveInstanceState -> onStop -> onDestroy -> onCreate -> onStart -> onRestoreInstanceState -> onResume |      |

- 用onRestoreInstanceState方法恢复数据，你可以决定是否在方法里调用父类的onRestoreInstanceState方法，即是否调用super.onRestoreInstanceState(savedInstanceState);
  而用onCreate()恢复数据，你必须调用super.onCreate(savedInstanceState);
  否则运行会报错：SuperNotCalledException