<h2 style="text-align:center">怎么强制停止一个线程</h2>

### 使用interrupt中断线程

中断一个线程只是为了引起该线程的注意，被中断线程可以决定如何应对中断。某些线程非常重要，以至于它们应该不理会中断，而是在处理完抛出的异常之后继续执行，但是更普遍的情况是，一个线程将把中断看作一个终止请求，这种线程的run方法遵循如下形式：

```java
public void run() {
    try {
        ...
        /*
         * 不管循环里是否调用过线程阻塞的方法如sleep、join、wait，这里还是需要加上
         * !Thread.currentThread().isInterrupted()条件，虽然抛出异常后退出了循环，显
         * 得用阻塞的情况下是多余的，但如果调用了阻塞方法但没有阻塞时，这样会更安全、更及时。
         */
        while (!Thread.currentThread().isInterrupted()&& more work to do) {
            do more work 
        }
    } catch (InterruptedException e) {
        //线程在wait或sleep期间被中断了
    } finally {
        //线程结束前做一些清理工作
    }
}
```

上面是while循环在try块里，如果try在while循环里时，因该在catch块里重新设置一下中断标示，因为抛出`InterruptedException`异常后，中断标示位会自动清除，此时应该这样：

```java
public void run() {
    while (!Thread.currentThread().isInterrupted()&& more work to do) {
        try {
            ...
            sleep(delay);
        } catch (InterruptedException e) {
	          /**
  	         *如果没有这一行代码，该线程会收到一次中断提示，但是之后会继续执行未完成的任务，也就是说中断实际上就不会起作用，因为抛出InterruptedException
  	         *异常后，中断标示位会自动清除。
    	       */
            Thread.currentThread().interrupt();//重新设置中断标示
        }
    }
}
```



